!function(t){var e={};function i(s){if(e[s])return e[s].exports;var a=e[s]={i:s,l:!1,exports:{}};return t[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:s})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);class s{constructor(t,e,i){this.height=t,this.width=e,this.depth=i,this.position=THREE.Vector3(),this.element={},this.src="",this.prevPale=null,this.nextPale=null,this.createPaleElement()}createPaleElement(){var t=document.createElement("a-box");t.setAttribute("static-body",""),t.setAttribute("position",this.position),t.setAttribute("height",this.height),t.setAttribute("width",this.width),t.setAttribute("depth",this.depth),t.setAttribute("velocity","0 0 0"),""!=this.src?t.setAttribute("src",this.src):t.setAttribute("color","blue"),this.element=t}}i(5)(),$(function(){document.getElementById("whiteLoadingMask"),document.getElementById("greenLoadingMask");var t=new s(.5,5,5),e=document.querySelector("a-scene");t.src="#start",t.position={x:0,y:-2,z:2},t.element.setAttribute("position",t.position),t.element.setAttribute("src",t.src),t.element.setAttribute("color",""),e.appendChild(t.element),e.addEventListener("menuclicked",function(){(new class{constructor(){var t;for(this.Pales=new Array,t=0;t<10;t++){var e=new s(.5,5,5);e.position={x:Math.round(100*Math.random())%5,y:3,z:-3-5*t},this.Pales.push(e)}}generateMap(){var t=document.querySelector("a-scene");this.Pales.forEach(e=>{e.element.setAttribute("position",e.position),e.element.setAttribute("move","");var i=5*Math.random();Math.floor(4*Math.random())%2==0&&(i*=-1),console.log(i),e.element.setAttribute("velocity",{x:i,y:0,z:0}),t.appendChild(e.element)})}}).generateMap(),$("#startGame").remove(),t.element.setAttribute("move","way: OneWay ; velocity : 0 2 0; to : 0 3 0"),i.components.player.gamestarted=!0});var i=document.getElementById("player");document.addEventListener("keydown",function(t){"KeyW"==t.code&&(i.components.player.wpressed=!0)});document.getElementById("testObject")})},function(t,e){t.exports=AFRAME.registerComponent("player",{schema:{},init:function(){this.position=this.el.object3D.position,this.el.setAttribute("dynamic-body","mass: 30; shape: box"),this.createPlayerBody();var t=this;this.gamestarted=!1,this.el.addEventListener("menuclicked",function(){t.gamestarted=!0})},tick:function(t,e){if(this.gamestarted&&this.wpressed){var i=this.el.object3D.position,s=new THREE.Vector3(0,0,-1);s.applyQuaternion(this.camera.object3D.quaternion);var a=10/s.length();["x","y","z"].forEach(function(t){s[t]*=a*(e/1e3)}),this.el.body.position.set(i.x+s.x,i.y,i.z+s.z),this.wpressed=!1}},createPlayerBody(){let t=this.el;var e=document.createElement("a-sphere");e.setAttribute("radius",.5),this.camera=document.getElementById("camera");var i=document.createElement("a-camera");this.camera=i,i.setAttribute("wasd-controls","enabled:false"),i.setAttribute("position","0 -1.5 0");var s=document.createElement("a-cursor");i.appendChild(s),t.camera=i,t.appendChild(i),t.appendChild(e)}})},function(t,e){t.exports=AFRAME.registerComponent("move",{schema:{velocity:{type:"vec3",default:{x:-1,y:0,z:0}},way:{type:"string",default:"TwoWay"},to:{type:"vec3",default:{x:10,y:0,z:0}}},init:function(){},tick:function(t,e){var i=this.el.object3D.position;if("TwoWay"==this.data.way){if(i.x>=this.data.to.x&&this.el.setAttribute("velocity",this.data.velocity),i.x<=-1*this.data.to.x){var s=this.data.velocity;console.log(s),this.el.setAttribute("velocity",{x:-1*s.x,y:s.y,z:s.z})}}else i.y<=this.data.to.y?this.el.setAttribute("velocity",this.data.velocity):this.el.setAttribute("velocity","0 0 0")}})},function(t,e){t.exports=AFRAME.registerComponent("menu-panel",{schema:{loadMaskColor:{default:"green"},maskHeight:{default:.2},maskWidth:{default:6},duration:{default:1.5}},init:function(){var t=this,e=this.el;this.whiteMask=this.createWhiteMask(this.data),this.loadMask=this.createLoadMask(this.data),this.whiteMask.appendChild(this.loadMask),this.startCount=!1,e.appendChild(this.whiteMask),e.addEventListener("mouseenter",function(){t.startCount=!0}),e.addEventListener("mouseleave",function(){t.startCount=!1;var e=t.loadMask;t.loadMask=t.createLoadMask(t.data),t.whiteMask.replaceChild(t.loadMask,e),t.whiteMask.setAttribute("visible",!1),t.starTime=null})},tick:function(t,e){if(this.startCount){this.whiteMask.setAttribute("visible",!0),null==this.starTime&&(this.starTime=t);var i=t-(this.starTime-1e-4),s=this.data.maskWidth*i/(1e3*this.data.duration),a=this.data.maskWidth/2*-1;if(i>=1e3*this.data.duration)return this.el.setAttribute("visible",!1),this.el.emit("menuclicked",{menu_item_id:this.el.getAttribute("id")}),void(this.startCount=!1);this.loadMask.setAttribute("width",s);var o=a+s/2;this.loadMask.setAttribute("position",{x:o,y:0,z:.01})}else this.whiteMask.setAttribute("visible",!1)},createWhiteMask(t){var e=document.createElement("a-plane");return e.setAttribute("visible",!1),e.setAttribute("color","white"),e.setAttribute("width",t.maskWidth),e.setAttribute("height",t.maskHeight),e.setAttribute("position","0 -0.6 0.01"),e},createLoadMask(t){var e=document.createElement("a-plane");return e.setAttribute("color",t.loadMaskColor),e.setAttribute("width",.01),e.setAttribute("height",t.maskHeight),e.setAttribute("position","0 0 0.001"),e}})},function(t,e){t.exports=AFRAME.registerComponent("follow",{schema:{target:{type:"selector"},speed:{type:"number"}},init:function(){this.directionVec3=new THREE.Vector3},tick:function(t,e){var i=this.directionVec3,s=this.data.target.object3D.position,a=this.el.object3D.position;i.copy(s).sub(a);var o=i.length();if(!(o<0)){var n=this.data.speed/o;["x","y","z"].forEach(function(t){i[t]*=n*(e/1e3)}),this.el.setAttribute("position",s)}}})},function(t,e,i){t.exports=function(){i(4),i(3),i(2),i(1)}}]);